# 记录

## 说明

- 这个项目作为webpack多文件打包使用，用于微型项目，如广告推广页面、简单投票页面等。
- 简单页面使用大型MVVM框架会导致打包体积过大。
- [开发进度日志](#开发进度日志)记录当前开发的功能与目前想法
- [任务列表](#任务列表)记录准备开发的功能

## 开发进度日志

- `2019-12-10 09:17`: 配置入口文件解析，测试项目能否启动
- `2019-12-10 09:25`: 取消热更新分步打包，避免不停重启
- `2019-12-10 17:26`: 加入了`mini-css-extract-plugin`插件，将css文件单独摘出。
- `2019-12-10 17:29`: 引入utils文件夹
- `2019-12-10 17:30`: 接下来尝试分包
- `2019-12-11 10:54`: 昨晚尝试打包文件时发现图片资源文件未能正常引用，无奈临时换用parcel处理，今天看一下是否会复现
- `2019-12-11 10:55`: 打包放到服务器后发现资源路径正常，可能是配置问题，接下来根据任务列表开发
- `2019-12-11 12:42`: 更新`html-webpack-loader`至beta版本可以自动将`splitChunks`分包后的文件引入到html文件中
- `2019-12-11 12:43`: 通过设置`filename`使得公共js文件存储为指定格式的文件，属性名为文件夹名称
- `2019-12-11 12:47`: 后续打算自动化webpack打包`pages`文件夹里面的文件，使用html开发所以打算依据`.html`自动化路由，暂时先用配置文件替代，拟用一个数组来导入`entry`和`htmlWebpackPlugin`配置 #TODO
- `2019-12-11 14:42`: 试了一下html页面也可以直接引用js，不用像之前那样js创建`script`标签再引入
- `2019-12-11 17:18`: css已经提取到公共文件，但是同时发现了一个问题，不知道什么原因，之前可以加载的图片路径现在又加载不到了，build之后不受影响，devserver文件路径错误
- `2019-12-11 17:30`: 发现原因了，是http路径问题`http://127.0.0.1:8080/home`后面加上`/`则访问不到图片
- `2019-12-12 14:42`: 使用src下面的`router.js`来控制路由显示
- `2019-12-12 16:47`: 使用`nodemon`监控配置文件更改来自动重启应用，更改dev-server配置用来监听html文件变化重载页面
- `2019-12-12 16:54`: 本来想对css也进行分包处理，但是实际工程没有遇到过同一工程采用截然不同的基础样式库的情况，所以暂时不做
- `2019-12-12 16:55`: 接下来对图片进行处理，理想是公共图片如logo、fav等可以复用的打包到固定的文件夹中，项目内的图片打包到项目中
- `2019-12-12 17:19`: 暂时先统一放到images里面，具体配置尚未处理
- `2019-12-13 09:09`: dev的时候不需要用到`cleanWebpackPlugin`，将其移入`webpack.prod.js`中加快开发编译速度
- `2019-12-13 10:25`: 图片根据路径分别进行处理
- `2019-12-13 10:45`: 经过测试发现`htmlWebpackPlugin`可以不引入任何chunks，但是带来的是不能引入css文件并且dev模式下hmr失效
- `2019-12-13 11:01`: 实际操作之后，综合考虑一下，决定规定`.html`文件必须配套一个`.js`文件处理，之后使用parcel可以考虑不需要配置`.js`文件，webpack用于打包js文件所以强制要求了
- `2019-12-13 13:14`: window和linux的图片路径统一使用`path.sep`进行正则拼接处理
- `2019-12-18 13:48`: 14、15号是周末，16、17刚搬家，耽搁了一下，现在继续进行自动编译的处理工作。规定html文件使用`htmlWebpackPlugin`打包，并配套相应的js文件，js文件不单独打包，由其他js文件引入使用
`2019-12-18 17:58`: 虽然成功加载到`pages`下的文件并且写入了对象中，但是由于是异步的所以只能加载`entry`而无法加载`htmlWebpackPlugin`，所以打算将其换成同步读取文件

## 任务列表

- [x] 配置同步
- [x] 提出公共js文件，lib文件
- [x] 提出公共css文件
- [x] 配置式打包文件`webpack.common.js`，避免增加一个文件夹手动加上很多代码
- [x] 使用自动化工具编译
- [x] 图片路径处理
- [ ] `pages`路径下自动编译
- [ ] layout布局
